<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temas</title>
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <nav>
        <a href="home.html" class="btn-nav">⬅ Volver</a>
        <h2 id="titulo-cat" style="margin:0;">Categoría</h2>
    </nav>

    <div class="container">
        <input type="text" id="buscador" class="buscador" placeholder="Buscar tema...">
        <div id="lista" class="grid-huaynos"></div>
    </div>

    <script type="module">
        import { baseDeTemas } from "./js/temas.js";
        const params = new URLSearchParams(window.location.search);
        const cat = params.get('cat') || 'huayno';
        document.getElementById("titulo-cat").innerText = cat.toUpperCase();

        const listaDiv = document.getElementById("lista");
        const buscador = document.getElementById("buscador");

        function render(f = "") {
            listaDiv.innerHTML = "";
            Object.keys(baseDeTemas).forEach(id => {
                const t = baseDeTemas[id];
                if(t.categoria === cat && t.titulo.toLowerCase().includes(f.toLowerCase())) {
                    const card = document.createElement("a");
                    card.href = `reproductor.html?id=${id}`;
                    card.className = `card ${t.tonalidad.toLowerCase().replace(" ", "-")}`;
                    card.innerHTML = `<span class="tono-tag">${t.tonalidad}</span> <span>${t.titulo}</span>`;
                    listaDiv.appendChild(card);
                }
            });
        }
        buscador.oninput = (e) => render(e.target.value);
        render();
    </script>
</body>
</html>